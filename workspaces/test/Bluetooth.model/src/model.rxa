/*
 * Copyright 2009 Markus Pielmeier
 *
 * This file is part of rox applet builder.
 *
 * rox applet builder is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * rox applet builder is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with rox applet builder.  If not, see <http://www.gnu.org/licenses/>.
 */

applet Bluetooth {
	group "de.bughome.python.bluetooth"
}

texts {
	text contextMenuExit = "Exit";
	text contextMenuDiscoverDevices = "Discover...";
	text devicesListScan = "Scan";
}

model Model {
	attribute bluetoothEnabled = "False";
	attribute visibleDevices = "[]";
}

composite DevicesList {
	vbox {
		data-table Devices {
			columns {
				column Name {
					type string;
				}
				column MacAddress {
					type string;
				}
			}
			model-change-handler {
				attribute visibleDevices;
			}
		}
		button Refresh {
			title devicesListScan;
			clicked-handler { }
		}
	}
}

composite Main {
	menus {
		menu Context {
			menu-item DiscoverDevices {
				title contextMenuDiscoverDevices;
				activated-handler { }
			}
			menu-item Exit {
				title contextMenuExit;
				activated-handler { }
			}
		}
	}

	toggle-button BluetoothEnabled {
		toggled-handler { }
		model-change-handler { attribute bluetoothEnabled; }
		popup-handler { menu Context; }
	}
}

gui {
	rootComposite Main
}
