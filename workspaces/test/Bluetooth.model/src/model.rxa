applet Bluetooth {
	group "de.bughome.python.bluetooth"
}

texts {
	text contextMenuExit = "Exit";
	text contextMenuDiscoverDevices = "Discover...";
	text devicesListScan = "Scan";
}

model Model {
	attribute bluetoothEnabled = "False";
	attribute visibleDevices = "[]";
}

composite DevicesList {
	vbox {
		data-table Devices {
			columns {
				column Name {
					type string;
				}
				column MacAddress {
					type string;
				}
			}
			model-change-handler {
				attribute visibleDevices;
			}
		}
		button Refresh {
			title devicesListScan;
			clicked-handler { }
		}
	}
}

composite Main {
	menus {
		menu Context {
			menu-item DiscoverDevices {
				title contextMenuDiscoverDevices;
				activated-handler { }
			}
			menu-item Exit {
				title contextMenuExit;
				activated-handler { }
			}
		}
	}

	toggle-button BluetoothEnabled {
		toggled-handler { }
		model-change-handler { attribute bluetoothEnabled; }
		popup-handler { menu Context; }
	}
}

gui {
	rootComposite Main
}
